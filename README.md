# lab5
---
## Цель
- Научиться работать с дебаггером

---
## Воссозданнные ошибки: 

### Ошибка 1: неверное логическое условие

**Место**: ```simulation.py```, метод ```run_simulation```.

**Симптом**: поиск книг по жанру возвращает книги всех жанров кроме данного.

**Воспроизводство**: запустить симуляцию с ```steps=10, seed=2```

**Отладка**: 
установлен breakpoint на строке 64 book.py (метод search_by_genre):
```return BookCollection([book for book in self._books if book.genre != genre])```
В отладчике видно, что заданный genre = 'Сказка' не совпадает с жанром книг. Следовательно строка возвращает истину.

**Причина**: использовано неверное логическое сравнение, что нарушает логику работы программы.

**Исправление**: ```==``` вместо ```!=```.

**Проверка**: Поведение симуляции соответствует ожидаемому.

**Доказательства**
  -   
  - 

---
### Ошибка 2: ошибĸа границы циĸла (off-by-one)

**Место**: ```simulation.py```, метод ```run_simulation```.

**Симптом**: ```Exception: list index out of range```

**Воспроизводство**: seed=23 (шаг8)

**Отладка**: breakpoint на add_book класса Library. Отладчик указывает на строку 40 файла book.py. Видно, что данная строка использует лишний индекс.

**Причина**: range(0, len(self._books) + 1) выходит за пределы индексов списка.

**Исправление**: убрать ```+ 1```

**Проверка**: Поведение симуляции соответствует ожидаемому.

**Доказательства**:

---
### Ошибка 3: ошибка состояния

**Место**: ```simulation.py```, метод ```run_simulation```.

**Симптом**: симуляция не останавливается после n steps. 

**Воспроизводство**: steps=10, seed=63531

**Отладка**: breakpoint на строке 18 simulation.py. Отладчик показывает, что step остаётся = 1 после каждого шага.

**Причина**: step = 1 задает значение 1 в конце каждого цикла

**Исправление**: исправить на step += 1

**Проверка**: Поведение симуляции соответствует ожидаемому.(10 шагов)

**Доказательства**:

---
### Ошибка 4: перепутанные аргументы или поля объеĸта

**Место**: ```simulation.py```, метод ```run_simulation```.

**Симптом**: книги не выдаются читателям

**Воспроизводство**: steps=10, seed=63531

**Отладка**: breakpoint строка 88 library.py
```        if isbn not in self._index:      ```
Отладчик показывает, что значение reader и isbn перепутаны

**Причина**: isbn и reader в вызове и в самой функции указаны в разном порядке

**Исправление**: поменять местами аргументы

**Проверка**: Поведение симуляции соответствует ожидаемому.(книги выдаются)

**Доказательства**:

---
### Ошибка 5: 

**Место**: ```simulation.py```, метод ```run_simulation```.

**Симптом**: книга данного года не находится

**Воспроизводство**: steps=10, seed=221

**Отладка**: breakpoint str81 library.py
```books_by_year = self._index.search_by_year(year)```
Отладчик показывает, что year = 1966, когда на самом деле он = 66

**Причина**: неправильное принятие данных прибавление 1900 если год < 100 

**Исправление**: убрать строчку с прибавлением 1900

**Проверка**: Поведение симуляции соответствует ожидаемому.

**Доказательства**:



